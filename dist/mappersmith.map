{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///mappersmith.js","webpack:///webpack/bootstrap f77478ebd2e3a9c84236","webpack:///./lib/utils.js","webpack:///./lib/mappersmith.js","webpack:///./lib/response.js","webpack:///./lib/index.js","webpack:///./lib/client-builder.js","webpack:///./lib/manifest.js","webpack:///./lib/method-descriptor.js","webpack:///./lib/request.js","webpack:///./lib/gateway/xhr.js","webpack:///./lib/gateway.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","toQueryString","entry","isPlainObject","validKeys","map","key","buildRecursive","join","replace","R20","performanceNow","hasProcessHrtime","getNanoSeconds","loadTime","Date","now","parseResponseHeaders","headerStr","headers","headerPairs","split","length","headerPair","index","indexOf","substring","toLowerCase","val","trim","lowerCaseObjectKeys","obj","keys","reduce","target","value","toString","getPrototypeOf","_typeof2","Symbol","iterator","constructor","_typeof","_process","eval","e","hrtime","hr","filter","undefined","suffix","isArray","Array","isObject","v","k","encodeURIComponent","assign","arguments","source","CHARS","btoa","input","block","charCode","output","str","String","idx","charAt","charCodeAt","Error","forge","manifest","GatewayClassFactory","configs","gateway","_clientBuilder2","default","build","setContext","_clientBuilder","_utils","context","middleware","Promise","fetch","gatewayConfigs","emulateHTTP","XHR","withCredentials","configure","HTTP","Fetch","credentials","Response","originalRequest","responseStatus","responseData","responseHeaders","requestParams","auth","maskedAuth","password","enhance","timeElapsed","request","status","success","header","rawData","data","isContentTypeJSON","JSON","parse","test","extras","lib","defaultGateway","XMLHttpRequest","_interopRequireDefault","_defineProperty","writable","ClientBuilder","defaultGatewayConfigs","defaultMiddleware","_manifest2","_manifest","_request","_request2","_this","client","eachResource","methods","buildResource","resourceName","_this2","resource","method","descriptor","invokeMiddlewares","resourceMethod","initialRequest","createMiddleware","finalRequest","GatewayClass","callGateway","next","response","_toConsumableArray","arr","arr2","from","Manifest","host","clientId","resources","concat","middlewares","_methodDescriptor","_methodDescriptor2","callback","forEach","eachMethod","methodName","createMethodDescriptor","definition","path","args","createInstance","middlewareFactory","MethodDescriptor","params","binary","bodyAttr","headersAttr","authAttr","timeoutAttr","Request","methodDescriptor","REGEXP_DYNAMIC_SEGMENT","RegExp","isParam","pattern","missingDynamicSegmentMatch","match","queryString","url","body","timeout","headerKey","bodyKey","authKey","timeoutKey","isBinary","_gateway2","apply","_gateway","_response","_response2","toBase64","window","extends","xmlHttpRequest","createXHR","open","setHeaders","configureTimeout","send","post","performRequest","put","patch","delete","canceled","timer","addEventListener","clearTimeout","dispatchClientError","setTimeout","configureCallbacks","dispatchResponse","createResponse","xhrOptions","options","requestMethod","shouldEmulateHTTP","customHeaders","prepareBody","push","responseText","getAllResponseHeaders","username","headerName","setRequestHeader","responseType","Gateway","successCallback","failCallback","_mappersmith","_arguments","timeStart","resolve","reject","message","_method","bodyString"],"mappings":"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","file":"mappersmith.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mappersmith\"] = factory();\n\telse\n\t\troot[\"mappersmith\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mappersmith\"] = factory();\n\telse\n\t\troot[\"mappersmith\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof2(obj);\n};\n\nexports.toQueryString = toQueryString;\nexports.performanceNow = performanceNow;\nexports.parseResponseHeaders = parseResponseHeaders;\nexports.lowerCaseObjectKeys = lowerCaseObjectKeys;\nexports.isPlainObject = isPlainObject;\nvar _process = void 0,\n    getNanoSeconds = void 0,\n    loadTime = void 0;\ntry {\n  _process = eval('typeof __TEST_WEB__ === \"undefined\" && typeof process === \"object\" ? process : undefined');\n} catch (e) {} // eslint-disable-line no-eval\n\nvar hasProcessHrtime = function hasProcessHrtime() {\n  return typeof _process !== 'undefined' && _process !== null && _process.hrtime;\n};\n\nif (hasProcessHrtime()) {\n  getNanoSeconds = function getNanoSeconds() {\n    var hr = _process.hrtime();\n    return hr[0] * 1e9 + hr[1];\n  };\n  loadTime = getNanoSeconds();\n}\n\nvar R20 = /%20/g;\n\nvar validKeys = function validKeys(entry) {\n  return Object.keys(entry).filter(function (key) {\n    return entry[key] !== undefined && entry[key] !== null;\n  });\n};\n\nvar buildRecursive = function buildRecursive(key, value, suffix) {\n  suffix = suffix || '';\n  var isArray = Array.isArray(value);\n  var isObject = (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object';\n\n  if (!isArray && !isObject) {\n    return encodeURIComponent(key + suffix) + '=' + encodeURIComponent(value);\n  }\n\n  if (isArray) {\n    return value.map(function (v) {\n      return buildRecursive(key, v, suffix + '[]');\n    }).join('&');\n  }\n\n  return validKeys(value).map(function (k) {\n    return buildRecursive(key, value[k], suffix + '[' + k + ']');\n  }).join('&');\n};\n\nfunction toQueryString(entry) {\n  if (!isPlainObject(entry)) {\n    return entry;\n  }\n\n  return validKeys(entry).map(function (key) {\n    return buildRecursive(key, entry[key]);\n  }).join('&').replace(R20, '+');\n}\n\n/**\n * Gives time in miliseconds, but with sub-milisecond precision for Browser\n * and Nodejs\n */\nfunction performanceNow() {\n  if (hasProcessHrtime()) {\n    return (getNanoSeconds() - loadTime) / 1e6;\n  }\n\n  return Date.now();\n}\n\n/**\n * borrowed from: {@link https://gist.github.com/monsur/706839}\n * XmlHttpRequest's getAllResponseHeaders() method returns a string of response\n * headers according to the format described here:\n * {@link http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders-method}\n * This method parses that string into a user-friendly key/value pair object.\n */\nfunction parseResponseHeaders(headerStr) {\n  var headers = {};\n  if (!headerStr) {\n    return headers;\n  }\n\n  var headerPairs = headerStr.split('\\r\\n');\n  for (var i = 0; i < headerPairs.length; i++) {\n    var headerPair = headerPairs[i];\n    // Can't use split() here because it does the wrong thing\n    // if the header value has the string \": \" in it.\n    var index = headerPair.indexOf(': ');\n    if (index > 0) {\n      var key = headerPair.substring(0, index).toLowerCase();\n      var val = headerPair.substring(index + 2).trim();\n      headers[key] = val;\n    }\n  }\n  return headers;\n}\n\nfunction lowerCaseObjectKeys(obj) {\n  return Object.keys(obj).reduce(function (target, key) {\n    target[key.toLowerCase()] = obj[key];\n    return target;\n  }, {});\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar assign = exports.assign = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\n\nvar toString = Object.prototype.toString;\nfunction isPlainObject(value) {\n  return toString.call(value) === '[object Object]' && Object.getPrototypeOf(value) === Object.getPrototypeOf({});\n}\n\n/**\n * borrowed from: {@link https://github.com/davidchambers/Base64.js}\n */\nvar CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar btoa = exports.btoa = function btoa(input) {\n  var output = '';\n  var map = CHARS;\n  var str = String(input);\n  for (\n  // initialize result and counter\n  var block, charCode, idx = 0;\n  // if the next str index does not exist:\n  //   change the mapping table to \"=\"\n  //   check if d has no fractional digits\n  str.charAt(idx | 0) || (map = '=', idx % 1);\n  // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n  output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new Error(\"[Mappersmith] 'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setContext = exports.configs = undefined;\nexports.default = forge;\n\nvar _clientBuilder = __webpack_require__(4);\n\nvar _clientBuilder2 = _interopRequireDefault(_clientBuilder);\n\nvar _utils = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar configs = exports.configs = {\n  context: {},\n  middleware: [],\n  Promise: typeof Promise === 'function' ? Promise : null,\n  fetch: typeof fetch === 'function' ? fetch : null, // eslint-disable-line no-undef\n\n  /**\n   * Gateway implementation, it defaults to \"lib/gateway/xhr\" for browsers and\n   * \"lib/gateway/http\" for node\n   */\n  gateway: null,\n  gatewayConfigs: {\n    /**\n     * Setting this option will fake PUT, PATCH and DELETE requests with a HTTP POST. It will\n     * add \"_method\" and \"X-HTTP-Method-Override\" with the original requested method\n     * @default false\n     */\n    emulateHTTP: false,\n\n    XHR: {\n      /**\n       * Indicates whether or not cross-site Access-Control requests should be made using credentials\n       * such as cookies, authorization headers or TLS client certificates.\n       * Setting withCredentials has no effect on same-site requests\n       *\n       * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials\n       *\n       * @default false\n       */\n      withCredentials: false,\n\n      /**\n       * For aditional configurations to the XMLHttpRequest object.\n       * @param {XMLHttpRequest} xhr\n       * @default null\n       */\n      configure: null\n    },\n\n    HTTP: {\n      /**\n       * For aditional configurations to the http/https module\n       * For http: https://nodejs.org/api/http.html#http_http_request_options_callback\n       * For https: https://nodejs.org/api/https.html#https_https_request_options_callback\n       *\n       * @param {object} options\n       * @default null\n       */\n      configure: null\n    },\n\n    Fetch: {\n      /**\n       * Indicates whether the user agent should send cookies from the other domain in the case of cross-origin\n       * requests. This is similar to XHR’s withCredentials flag, but with three available values (instead of two):\n       *\n       * \"omit\": Never send cookies.\n       * \"same-origin\": Only send cookies if the URL is on the same origin as the calling script.\n       * \"include\": Always send cookies, even for cross-origin calls.\n       *\n       * https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\n       *\n       * @default \"omit\"\n       */\n      credentials: 'omit'\n    }\n\n    /**\n     * @param {Object} context\n     */\n  } };var setContext = exports.setContext = function setContext(context) {\n  configs.context = (0, _utils.assign)(configs.context, context);\n};\n\n/**\n * @param {Object} manifest\n */\nfunction forge(manifest) {\n  var GatewayClassFactory = function GatewayClassFactory() {\n    return configs.gateway;\n  };\n  return new _clientBuilder2.default(manifest, GatewayClassFactory, configs).build();\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(0);\n\n/**\n * @typedef Response\n * @param {Request} originalRequest, for auth it hides the password\n * @param {Integer} responseStatus\n * @param {String} responseData, defaults to null\n * @param {Object} responseHeaders, defaults to an empty object ({})\n */\nfunction Response(originalRequest, responseStatus, responseData, responseHeaders) {\n  if (originalRequest.requestParams && originalRequest.requestParams.auth) {\n    var maskedAuth = (0, _utils.assign)({}, originalRequest.requestParams.auth, { password: '***' });\n    this.originalRequest = originalRequest.enhance({ auth: maskedAuth });\n  } else {\n    this.originalRequest = originalRequest;\n  }\n\n  this.responseStatus = responseStatus;\n  this.responseData = responseData !== undefined ? responseData : null;\n  this.responseHeaders = responseHeaders || {};\n  this.timeElapsed = null;\n}\n\nResponse.prototype = {\n  /**\n   * @return {Request}\n   */\n  request: function request() {\n    return this.originalRequest;\n  },\n\n  /**\n   * @return {Integer}\n   */\n  status: function status() {\n    // IE sends 1223 instead of 204\n    if (this.responseStatus === 1223) {\n      return 204;\n    }\n\n    return this.responseStatus;\n  },\n\n  /**\n   * Returns true if status is greater or equal 200 or lower than 400\n   *\n   * @return {Boolean}\n   */\n  success: function success() {\n    var status = this.status();\n    return status >= 200 && status < 400;\n  },\n\n  /**\n   * Returns an object with the headers. Header names are converted to\n   * lowercase\n   *\n   * @return {Object}\n   */\n  headers: function headers() {\n    return (0, _utils.lowerCaseObjectKeys)(this.responseHeaders);\n  },\n\n  /**\n   * Utility method to get a header value by name\n   *\n   * @param {String} name\n   *\n   * @return {String|Undefined}\n   */\n  header: function header(name) {\n    return this.headers()[name.toLowerCase()];\n  },\n\n  /**\n   * Returns the original response data\n   */\n  rawData: function rawData() {\n    return this.responseData;\n  },\n\n  /**\n   * Returns the response data, if \"Content-Type\" is \"application/json\"\n   * it parses the response and returns an object\n   *\n   * @return {String|Object}\n   */\n  data: function data() {\n    var data = this.responseData;\n\n    if (this.isContentTypeJSON()) {\n      try {\n        data = JSON.parse(this.responseData);\n      } catch (e) {}\n    }\n\n    return data;\n  },\n  isContentTypeJSON: function isContentTypeJSON() {\n    return (/application\\/json/.test(this.headers()['content-type'])\n    );\n  },\n\n  /**\n   * Enhances current Response returning a new Response\n   *\n   * @param {Object} extras\n   *   @param {Integer} extras.status - it will replace the current status\n   *   @param {String} extras.rawData - it will replace the current rawStatus\n   *   @param {Object} extras.headers - it will be merged with current headers\n   *\n   * @return {Response}\n   */\n  enhance: function enhance(extras) {\n    return new Response(this.request(), extras.status || this.status(), extras.rawData || this.rawData(), (0, _utils.assign)({}, this.headers(), extras.headers));\n  }\n};\n\nexports.default = Response;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar lib = __webpack_require__(1);\nvar _process, defaultGateway;\n\n// Prevents webpack to load the nodejs processs polyfill\ntry {\n  _process = eval('typeof process === \"object\" ? process : undefined');\n} catch (e) {} // eslint-disable-line no-eval\n\nif (typeof XMLHttpRequest !== 'undefined') {\n  // For browsers use XHR adapter\n  defaultGateway = __webpack_require__(8).default;\n} else if (typeof _process !== 'undefined') {\n  // For node use HTTP adapter\n  defaultGateway = __webpack_require__(10).default;\n}\n\nlib.configs.gateway = defaultGateway;\nmodule.exports = lib;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _manifest = __webpack_require__(5);\n\nvar _manifest2 = _interopRequireDefault(_manifest);\n\nvar _request = __webpack_require__(7);\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _utils = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n  } else {\n    obj[key] = value;\n  }return obj;\n}\n\n/**\n * @typedef ClientBuilder\n * @param {Object} manifest - manifest definition with at least the `resources` key\n * @param {Function} GatewayClassFactory - factory function that returns a gateway class\n */\nfunction ClientBuilder(manifest, GatewayClassFactory, configs) {\n  if (!manifest) {\n    throw new Error('[Mappersmith] invalid manifest (' + manifest + ')');\n  }\n\n  if (!GatewayClassFactory || !GatewayClassFactory()) {\n    throw new Error('[Mappersmith] gateway class not configured (configs.gateway)');\n  }\n\n  var defaultGatewayConfigs = configs.gatewayConfigs;\n  var defaultMiddleware = configs.middleware;\n  this.context = configs.context;\n\n  this.manifest = new _manifest2.default(manifest, defaultGatewayConfigs, defaultMiddleware);\n  this.GatewayClassFactory = GatewayClassFactory;\n}\n\nClientBuilder.prototype = {\n  build: function build() {\n    var _this = this;\n\n    var client = { _manifest: this.manifest };\n\n    this.manifest.eachResource(function (name, methods) {\n      client[name] = _this.buildResource(name, methods);\n    });\n\n    return client;\n  },\n  buildResource: function buildResource(resourceName, methods) {\n    var _this2 = this;\n\n    return methods.reduce(function (resource, method) {\n      return (0, _utils.assign)(resource, _defineProperty({}, method.name, function (requestParams) {\n        var request = new _request2.default(method.descriptor, requestParams);\n        return _this2.invokeMiddlewares(resourceName, method.name, request);\n      }));\n    }, {});\n  },\n  invokeMiddlewares: function invokeMiddlewares(resourceName, resourceMethod, initialRequest) {\n    var context = (0, _utils.assign)({}, this.context);\n    var middleware = this.manifest.createMiddleware({ resourceName: resourceName, resourceMethod: resourceMethod, context: context });\n    var finalRequest = middleware.reduce(function (request, middleware) {\n      return middleware.request(request);\n    }, initialRequest);\n\n    var GatewayClass = this.GatewayClassFactory();\n    var gatewayConfigs = this.manifest.gatewayConfigs;\n    var callGateway = function callGateway() {\n      return new GatewayClass(finalRequest, gatewayConfigs).call();\n    };\n\n    var execute = middleware.reduce(function (next, middleware) {\n      return function () {\n        return middleware.response(next);\n      };\n    }, callGateway);\n\n    return execute();\n  }\n};\n\nexports.default = ClientBuilder;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _methodDescriptor = __webpack_require__(6);\n\nvar _methodDescriptor2 = _interopRequireDefault(_methodDescriptor);\n\nvar _utils = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\n/**\n * @typedef Manifest\n * @param {Object} obj\n *   @param {String} obj.host\n *   @param {Object} obj.gatewayConfigs - default: base values from mappersmith\n *   @param {Object} obj.resources - default: {}\n *   @param {Array}  obj.middleware or obj.middlewares - default: []\n */\nfunction Manifest(obj) {\n  var defaultGatewayConfigs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var defaultMiddleware = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  this.host = obj.host;\n  this.clientId = obj.clientId || null;\n  this.gatewayConfigs = (0, _utils.assign)({}, defaultGatewayConfigs, obj.gatewayConfigs);\n  this.resources = obj.resources || {};\n\n  // TODO: deprecate obj.middlewares in favor of obj.middleware\n  this.middleware = [].concat(_toConsumableArray(obj.middleware || obj.middlewares || []), _toConsumableArray(defaultMiddleware));\n}\n\nManifest.prototype = {\n  eachResource: function eachResource(callback) {\n    var _this = this;\n\n    Object.keys(this.resources).forEach(function (resourceName) {\n      var methods = _this.eachMethod(resourceName, function (methodName) {\n        return {\n          name: methodName,\n          descriptor: _this.createMethodDescriptor(resourceName, methodName)\n        };\n      });\n\n      callback(resourceName, methods);\n    });\n  },\n  eachMethod: function eachMethod(resourceName, callback) {\n    return Object.keys(this.resources[resourceName]).map(callback);\n  },\n  createMethodDescriptor: function createMethodDescriptor(resourceName, methodName) {\n    var definition = this.resources[resourceName][methodName];\n\n    if (!definition || !definition.path) {\n      throw new Error('[Mappersmith] path is undefined for resource \"' + resourceName + '\" method \"' + methodName + '\"');\n    }\n\n    return new _methodDescriptor2.default((0, _utils.assign)({ host: this.host }, definition));\n  },\n\n  /**\n   * @param {Object} args\n   *   @param {String|Null} args.clientId\n   *   @param {String} args.resourceName\n   *   @param {String} args.resourceMethod\n   *   @param {Object} args.context\n   *   @param {Boolean} args.mockRequest\n   *\n   * @return {Array<Object>}\n   */\n  createMiddleware: function createMiddleware() {\n    var _this2 = this;\n\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var createInstance = function createInstance(middlewareFactory) {\n      return (0, _utils.assign)({\n        request: function request(_request) {\n          return _request;\n        },\n        response: function response(next) {\n          return next();\n        }\n      }, middlewareFactory((0, _utils.assign)(args, { clientId: _this2.clientId })));\n    };\n\n    return this.middleware.map(createInstance);\n  }\n};\n\nexports.default = Manifest;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MethodDescriptor;\n/**\n * @typedef MethodDescriptor\n * @param {Object} obj\n *   @param {String} obj.host\n *   @param {String} obj.path\n *   @param {String} obj.method\n *   @param {Object} obj.headers\n *   @param {Object} obj.params\n *   @param {String} obj.bodyAttr - body attribute name. Default: 'body'\n *   @param {String} obj.headersAttr - headers attribute name. Default: 'headers'\n *   @param {String} obj.authAttr - auth attribute name. Default: 'auth'\n *   @param {Number} obj.timeoutAttr - timeout attribute name. Default: 'timeout'\n */\nfunction MethodDescriptor(obj) {\n  this.host = obj.host;\n  this.path = obj.path;\n  this.method = obj.method || 'get';\n  this.headers = obj.headers;\n  this.params = obj.params;\n  this.binary = obj.binary || false;\n\n  this.bodyAttr = obj.bodyAttr || 'body';\n  this.headersAttr = obj.headersAttr || 'headers';\n  this.authAttr = obj.authAttr || 'auth';\n  this.timeoutAttr = obj.timeoutAttr || 'timeout';\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(0);\n\nvar REGEXP_DYNAMIC_SEGMENT = new RegExp('{([^}]+)}');\n\n/**\n * @typedef Request\n * @param {MethodDescriptor} methodDescriptor\n * @param {Object} requestParams, defaults to an empty object ({})\n */\nfunction Request(methodDescriptor, requestParams) {\n  this.methodDescriptor = methodDescriptor;\n  this.requestParams = requestParams || {};\n}\n\nRequest.prototype = {\n  /**\n   * @return {Object}\n   */\n  params: function params() {\n    var _this = this;\n\n    var params = (0, _utils.assign)({}, this.methodDescriptor.params, this.requestParams);\n\n    var isParam = function isParam(key) {\n      return key !== _this.methodDescriptor.headersAttr && key !== _this.methodDescriptor.bodyAttr && key !== _this.methodDescriptor.authAttr && key !== _this.methodDescriptor.timeoutAttr;\n    };\n\n    return Object.keys(params).reduce(function (obj, key) {\n      if (isParam(key)) {\n        obj[key] = params[key];\n      }\n      return obj;\n    }, {});\n  },\n\n  /**\n   * Returns the HTTP method in lowercase\n   *\n   * @return {String}\n   */\n  method: function method() {\n    return this.methodDescriptor.method.toLowerCase();\n  },\n\n  /**\n   * Returns host name without trailing slash\n   * Example: http://example.org\n   *\n   * @return {String}\n   */\n  host: function host() {\n    return (this.methodDescriptor.host || '').replace(/\\/$/, '');\n  },\n\n  /**\n   * Returns path with parameters and leading slash.\n   * Example: /some/path?param1=true\n   *\n   * @throws {Error} if any dynamic segment is missing.\n   * Example:\n   * Imagine the path '/some/{name}', the error will be similar to:\n   * '[Mappersmith] required parameter missing (name), \"/some/{name}\" cannot be resolved'\n   *\n   * @return {String}\n   */\n  path: function path() {\n    var path = this.methodDescriptor.path;\n\n    if (this.methodDescriptor.path[0] !== '/') {\n      path = '/' + this.methodDescriptor.path;\n    }\n\n    var params = this.params();\n    Object.keys(params).forEach(function (key) {\n      var value = params[key];\n      var pattern = '{' + key + '}';\n\n      if (new RegExp(pattern).test(path)) {\n        path = path.replace('{' + key + '}', value);\n        delete params[key];\n      }\n    });\n\n    var missingDynamicSegmentMatch = path.match(REGEXP_DYNAMIC_SEGMENT);\n    if (missingDynamicSegmentMatch) {\n      throw new Error('[Mappersmith] required parameter missing (' + missingDynamicSegmentMatch[1] + '), \"' + path + '\" cannot be resolved');\n    }\n\n    var queryString = (0, _utils.toQueryString)(params);\n    if (queryString.length !== 0) {\n      path += '?' + queryString;\n    }\n\n    return path;\n  },\n\n  /**\n   * Returns the full URL\n   * Example: http://example.org/some/path?param1=true\n   *\n   * @return {String}\n   */\n  url: function url() {\n    return '' + this.host() + this.path();\n  },\n\n  /**\n   * Returns an object with the headers. Header names are converted to\n   * lowercase\n   *\n   * @return {Object}\n   */\n  headers: function headers() {\n    return (0, _utils.lowerCaseObjectKeys)((0, _utils.assign)({}, this.methodDescriptor.headers, this.requestParams[this.methodDescriptor.headersAttr]));\n  },\n  body: function body() {\n    return this.requestParams[this.methodDescriptor.bodyAttr];\n  },\n  auth: function auth() {\n    return this.requestParams[this.methodDescriptor.authAttr];\n  },\n  timeout: function timeout() {\n    return this.requestParams[this.methodDescriptor.timeoutAttr];\n  },\n\n  /**\n   * Enhances current request returning a new Request\n   * @param {Object} extras\n   *   @param {Object} extras.params - it will be merged with current params\n   *   @param {Object} extras.headers - it will be merged with current headers\n   *   @param {String|Object} extras.body - it will replace the current body\n   *   @param {Object} extras.auth - it will replace the current auth\n   *   @param {Number} extras.timeout - it will replace the current timeout\n   */\n  enhance: function enhance(extras) {\n    var headerKey = this.methodDescriptor.headersAttr;\n    var bodyKey = this.methodDescriptor.bodyAttr;\n    var authKey = this.methodDescriptor.authAttr;\n    var timeoutKey = this.methodDescriptor.timeoutAttr;\n    var requestParams = (0, _utils.assign)({}, this.requestParams, extras.params);\n\n    requestParams[headerKey] = (0, _utils.assign)({}, this.requestParams[headerKey], extras.headers);\n    extras.body && (requestParams[bodyKey] = extras.body);\n    extras.auth && (requestParams[authKey] = extras.auth);\n    extras.timeout && (requestParams[timeoutKey] = extras.timeout);\n\n    return new Request(this.methodDescriptor, requestParams);\n  },\n\n  /**\n   * Is the request expecting a binary response?\n   *\n   * @return {Boolean}\n   */\n  isBinary: function isBinary() {\n    return this.methodDescriptor.binary;\n  }\n};\n\nexports.default = Request;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _gateway = __webpack_require__(9);\n\nvar _gateway2 = _interopRequireDefault(_gateway);\n\nvar _response = __webpack_require__(2);\n\nvar _response2 = _interopRequireDefault(_response);\n\nvar _utils = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar toBase64 = window.btoa || _utils.btoa;\n\nfunction XHR(request) {\n  _gateway2.default.apply(this, arguments);\n}\n\nXHR.prototype = _gateway2.default.extends({\n  get: function get() {\n    var xmlHttpRequest = this.createXHR();\n    xmlHttpRequest.open('get', this.request.url(), true);\n    this.setHeaders(xmlHttpRequest, {});\n    this.configureTimeout(xmlHttpRequest);\n    xmlHttpRequest.send();\n  },\n  post: function post() {\n    this.performRequest('post');\n  },\n  put: function put() {\n    this.performRequest('put');\n  },\n  patch: function patch() {\n    this.performRequest('patch');\n  },\n  delete: function _delete() {\n    this.performRequest('delete');\n  },\n  configureTimeout: function configureTimeout(xmlHttpRequest) {\n    var _this = this;\n\n    this.canceled = false;\n    this.timer = null;\n\n    var timeout = this.request.timeout();\n\n    if (timeout) {\n      xmlHttpRequest.timeout = timeout;\n      xmlHttpRequest.addEventListener('timeout', function () {\n        _this.canceled = true;\n        clearTimeout(_this.timer);\n        _this.dispatchClientError('Timeout (' + timeout + 'ms)');\n      });\n\n      // PhantomJS doesn't support timeout for XMLHttpRequest\n      this.timer = setTimeout(function () {\n        _this.canceled = true;\n        _this.dispatchClientError('Timeout (' + timeout + 'ms)');\n      }, timeout + 1);\n    }\n  },\n  configureCallbacks: function configureCallbacks(xmlHttpRequest) {\n    var _this2 = this;\n\n    xmlHttpRequest.addEventListener('load', function () {\n      if (_this2.canceled) {\n        return;\n      }\n\n      clearTimeout(_this2.timer);\n      _this2.dispatchResponse(_this2.createResponse(xmlHttpRequest));\n    });\n\n    xmlHttpRequest.addEventListener('error', function () {\n      if (_this2.canceled) {\n        return;\n      }\n\n      clearTimeout(_this2.timer);\n      _this2.dispatchClientError('Network error');\n    });\n\n    var xhrOptions = this.options().XHR;\n    if (xhrOptions.withCredentials) {\n      xmlHttpRequest.withCredentials = true;\n    }\n\n    if (xhrOptions.configure) {\n      xhrOptions.configure(xmlHttpRequest);\n    }\n  },\n  performRequest: function performRequest(method) {\n    var requestMethod = this.shouldEmulateHTTP() ? 'post' : method;\n    var xmlHttpRequest = this.createXHR();\n    xmlHttpRequest.open(requestMethod, this.request.url(), true);\n\n    var customHeaders = {};\n    var body = this.prepareBody(method, customHeaders);\n    this.setHeaders(xmlHttpRequest, customHeaders);\n    this.configureTimeout(xmlHttpRequest);\n\n    var args = [];\n    body && args.push(body);\n\n    xmlHttpRequest.send.apply(xmlHttpRequest, args);\n  },\n  createResponse: function createResponse(xmlHttpRequest) {\n    var status = xmlHttpRequest.status;\n    var data = this.request.isBinary() ? xmlHttpRequest.response : xmlHttpRequest.responseText;\n    var responseHeaders = (0, _utils.parseResponseHeaders)(xmlHttpRequest.getAllResponseHeaders());\n    return new _response2.default(this.request, status, data, responseHeaders);\n  },\n  setHeaders: function setHeaders(xmlHttpRequest, customHeaders) {\n    var auth = this.request.auth();\n    if (auth) {\n      var username = auth.username || '';\n      var password = auth.password || '';\n      customHeaders['authorization'] = 'Basic ' + toBase64(username + ':' + password);\n    }\n\n    var headers = (0, _utils.assign)(customHeaders, this.request.headers());\n    Object.keys(headers).forEach(function (headerName) {\n      xmlHttpRequest.setRequestHeader(headerName, headers[headerName]);\n    });\n  },\n  createXHR: function createXHR() {\n    var xmlHttpRequest = new XMLHttpRequest(); // eslint-disable-line no-undef\n    this.configureCallbacks(xmlHttpRequest);\n    if (this.request.isBinary()) {\n      xmlHttpRequest.responseType = 'blob';\n    }\n    return xmlHttpRequest;\n  }\n});\n\nexports.default = XHR;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(0);\n\nvar _mappersmith = __webpack_require__(1);\n\nvar _response = __webpack_require__(2);\n\nvar _response2 = _interopRequireDefault(_response);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction Gateway(request) {\n  var configs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  this.request = request;\n  this.configs = configs;\n  this.successCallback = function () {};\n  this.failCallback = function () {};\n}\n\nGateway.extends = function (methods) {\n  return (0, _utils.assign)({}, Gateway.prototype, methods);\n};\n\nGateway.prototype = {\n  options: function options() {\n    return this.configs;\n  },\n  shouldEmulateHTTP: function shouldEmulateHTTP() {\n    return this.options().emulateHTTP && /^(delete|put|patch)/i.test(this.request.method());\n  },\n  call: function call() {\n    var _this = this,\n        _arguments = arguments;\n\n    var timeStart = (0, _utils.performanceNow)();\n    return new _mappersmith.configs.Promise(function (resolve, reject) {\n      _this.successCallback = function (response) {\n        response.timeElapsed = (0, _utils.performanceNow)() - timeStart;\n        resolve(response);\n      };\n\n      _this.failCallback = function (response) {\n        response.timeElapsed = (0, _utils.performanceNow)() - timeStart;\n        reject(response);\n      };\n\n      try {\n        _this[_this.request.method()].apply(_this, _arguments);\n      } catch (e) {\n        _this.dispatchClientError(e.message);\n      }\n    });\n  },\n  dispatchResponse: function dispatchResponse(response) {\n    response.success() ? this.successCallback(response) : this.failCallback(response);\n  },\n  dispatchClientError: function dispatchClientError(message) {\n    this.failCallback(new _response2.default(this.request, 400, message));\n  },\n  prepareBody: function prepareBody(method, headers) {\n    var body = this.request.body();\n\n    if (this.shouldEmulateHTTP()) {\n      body = body || {};\n      (0, _utils.isPlainObject)(body) && (body._method = method);\n      headers['x-http-method-override'] = method;\n    }\n\n    var bodyString = (0, _utils.toQueryString)(body);\n\n    if (bodyString) {\n      // If it's not simple, let the browser (or the user) set it\n      if ((0, _utils.isPlainObject)(body)) {\n        headers['content-type'] = 'application/x-www-form-urlencoded;charset=utf-8';\n      }\n    }\n\n    return bodyString;\n  }\n};\n\nexports.default = Gateway;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// mappersmith.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f77478ebd2e3a9c84236","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.toQueryString = toQueryString;\nexports.performanceNow = performanceNow;\nexports.parseResponseHeaders = parseResponseHeaders;\nexports.lowerCaseObjectKeys = lowerCaseObjectKeys;\nexports.isPlainObject = isPlainObject;\nvar _process = void 0,\n    getNanoSeconds = void 0,\n    loadTime = void 0;\ntry {\n  _process = eval('typeof __TEST_WEB__ === \"undefined\" && typeof process === \"object\" ? process : undefined');\n} catch (e) {} // eslint-disable-line no-eval\n\nvar hasProcessHrtime = function hasProcessHrtime() {\n  return typeof _process !== 'undefined' && _process !== null && _process.hrtime;\n};\n\nif (hasProcessHrtime()) {\n  getNanoSeconds = function getNanoSeconds() {\n    var hr = _process.hrtime();\n    return hr[0] * 1e9 + hr[1];\n  };\n  loadTime = getNanoSeconds();\n}\n\nvar R20 = /%20/g;\n\nvar validKeys = function validKeys(entry) {\n  return Object.keys(entry).filter(function (key) {\n    return entry[key] !== undefined && entry[key] !== null;\n  });\n};\n\nvar buildRecursive = function buildRecursive(key, value, suffix) {\n  suffix = suffix || '';\n  var isArray = Array.isArray(value);\n  var isObject = (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object';\n\n  if (!isArray && !isObject) {\n    return encodeURIComponent(key + suffix) + '=' + encodeURIComponent(value);\n  }\n\n  if (isArray) {\n    return value.map(function (v) {\n      return buildRecursive(key, v, suffix + '[]');\n    }).join('&');\n  }\n\n  return validKeys(value).map(function (k) {\n    return buildRecursive(key, value[k], suffix + '[' + k + ']');\n  }).join('&');\n};\n\nfunction toQueryString(entry) {\n  if (!isPlainObject(entry)) {\n    return entry;\n  }\n\n  return validKeys(entry).map(function (key) {\n    return buildRecursive(key, entry[key]);\n  }).join('&').replace(R20, '+');\n}\n\n/**\n * Gives time in miliseconds, but with sub-milisecond precision for Browser\n * and Nodejs\n */\nfunction performanceNow() {\n  if (hasProcessHrtime()) {\n    return (getNanoSeconds() - loadTime) / 1e6;\n  }\n\n  return Date.now();\n}\n\n/**\n * borrowed from: {@link https://gist.github.com/monsur/706839}\n * XmlHttpRequest's getAllResponseHeaders() method returns a string of response\n * headers according to the format described here:\n * {@link http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders-method}\n * This method parses that string into a user-friendly key/value pair object.\n */\nfunction parseResponseHeaders(headerStr) {\n  var headers = {};\n  if (!headerStr) {\n    return headers;\n  }\n\n  var headerPairs = headerStr.split('\\r\\n');\n  for (var i = 0; i < headerPairs.length; i++) {\n    var headerPair = headerPairs[i];\n    // Can't use split() here because it does the wrong thing\n    // if the header value has the string \": \" in it.\n    var index = headerPair.indexOf(': ');\n    if (index > 0) {\n      var key = headerPair.substring(0, index).toLowerCase();\n      var val = headerPair.substring(index + 2).trim();\n      headers[key] = val;\n    }\n  }\n  return headers;\n}\n\nfunction lowerCaseObjectKeys(obj) {\n  return Object.keys(obj).reduce(function (target, key) {\n    target[key.toLowerCase()] = obj[key];\n    return target;\n  }, {});\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar assign = exports.assign = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\n\nvar toString = Object.prototype.toString;\nfunction isPlainObject(value) {\n  return toString.call(value) === '[object Object]' && Object.getPrototypeOf(value) === Object.getPrototypeOf({});\n}\n\n/**\n * borrowed from: {@link https://github.com/davidchambers/Base64.js}\n */\nvar CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar btoa = exports.btoa = function btoa(input) {\n  var output = '';\n  var map = CHARS;\n  var str = String(input);\n  for (\n  // initialize result and counter\n  var block, charCode, idx = 0;\n  // if the next str index does not exist:\n  //   change the mapping table to \"=\"\n  //   check if d has no fractional digits\n  str.charAt(idx | 0) || (map = '=', idx % 1);\n  // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n  output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n    if (charCode > 0xFF) {\n      throw new Error(\"[Mappersmith] 'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n    }\n    block = block << 8 | charCode;\n  }\n  return output;\n};\n\n\n// WEBPACK FOOTER //\n// ./lib/utils.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setContext = exports.configs = undefined;\nexports.default = forge;\n\nvar _clientBuilder = require('./client-builder');\n\nvar _clientBuilder2 = _interopRequireDefault(_clientBuilder);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar configs = exports.configs = {\n  context: {},\n  middleware: [],\n  Promise: typeof Promise === 'function' ? Promise : null,\n  fetch: typeof fetch === 'function' ? fetch : null, // eslint-disable-line no-undef\n\n  /**\n   * Gateway implementation, it defaults to \"lib/gateway/xhr\" for browsers and\n   * \"lib/gateway/http\" for node\n   */\n  gateway: null,\n  gatewayConfigs: {\n    /**\n     * Setting this option will fake PUT, PATCH and DELETE requests with a HTTP POST. It will\n     * add \"_method\" and \"X-HTTP-Method-Override\" with the original requested method\n     * @default false\n     */\n    emulateHTTP: false,\n\n    XHR: {\n      /**\n       * Indicates whether or not cross-site Access-Control requests should be made using credentials\n       * such as cookies, authorization headers or TLS client certificates.\n       * Setting withCredentials has no effect on same-site requests\n       *\n       * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials\n       *\n       * @default false\n       */\n      withCredentials: false,\n\n      /**\n       * For aditional configurations to the XMLHttpRequest object.\n       * @param {XMLHttpRequest} xhr\n       * @default null\n       */\n      configure: null\n    },\n\n    HTTP: {\n      /**\n       * For aditional configurations to the http/https module\n       * For http: https://nodejs.org/api/http.html#http_http_request_options_callback\n       * For https: https://nodejs.org/api/https.html#https_https_request_options_callback\n       *\n       * @param {object} options\n       * @default null\n       */\n      configure: null\n    },\n\n    Fetch: {\n      /**\n       * Indicates whether the user agent should send cookies from the other domain in the case of cross-origin\n       * requests. This is similar to XHR’s withCredentials flag, but with three available values (instead of two):\n       *\n       * \"omit\": Never send cookies.\n       * \"same-origin\": Only send cookies if the URL is on the same origin as the calling script.\n       * \"include\": Always send cookies, even for cross-origin calls.\n       *\n       * https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\n       *\n       * @default \"omit\"\n       */\n      credentials: 'omit'\n    }\n  }\n\n  /**\n   * @param {Object} context\n   */\n};var setContext = exports.setContext = function setContext(context) {\n  configs.context = (0, _utils.assign)(configs.context, context);\n};\n\n/**\n * @param {Object} manifest\n */\nfunction forge(manifest) {\n  var GatewayClassFactory = function GatewayClassFactory() {\n    return configs.gateway;\n  };\n  return new _clientBuilder2.default(manifest, GatewayClassFactory, configs).build();\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/mappersmith.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('./utils');\n\n/**\n * @typedef Response\n * @param {Request} originalRequest, for auth it hides the password\n * @param {Integer} responseStatus\n * @param {String} responseData, defaults to null\n * @param {Object} responseHeaders, defaults to an empty object ({})\n */\nfunction Response(originalRequest, responseStatus, responseData, responseHeaders) {\n  if (originalRequest.requestParams && originalRequest.requestParams.auth) {\n    var maskedAuth = (0, _utils.assign)({}, originalRequest.requestParams.auth, { password: '***' });\n    this.originalRequest = originalRequest.enhance({ auth: maskedAuth });\n  } else {\n    this.originalRequest = originalRequest;\n  }\n\n  this.responseStatus = responseStatus;\n  this.responseData = responseData !== undefined ? responseData : null;\n  this.responseHeaders = responseHeaders || {};\n  this.timeElapsed = null;\n}\n\nResponse.prototype = {\n  /**\n   * @return {Request}\n   */\n  request: function request() {\n    return this.originalRequest;\n  },\n\n\n  /**\n   * @return {Integer}\n   */\n  status: function status() {\n    // IE sends 1223 instead of 204\n    if (this.responseStatus === 1223) {\n      return 204;\n    }\n\n    return this.responseStatus;\n  },\n\n\n  /**\n   * Returns true if status is greater or equal 200 or lower than 400\n   *\n   * @return {Boolean}\n   */\n  success: function success() {\n    var status = this.status();\n    return status >= 200 && status < 400;\n  },\n\n\n  /**\n   * Returns an object with the headers. Header names are converted to\n   * lowercase\n   *\n   * @return {Object}\n   */\n  headers: function headers() {\n    return (0, _utils.lowerCaseObjectKeys)(this.responseHeaders);\n  },\n\n\n  /**\n   * Utility method to get a header value by name\n   *\n   * @param {String} name\n   *\n   * @return {String|Undefined}\n   */\n  header: function header(name) {\n    return this.headers()[name.toLowerCase()];\n  },\n\n\n  /**\n   * Returns the original response data\n   */\n  rawData: function rawData() {\n    return this.responseData;\n  },\n\n\n  /**\n   * Returns the response data, if \"Content-Type\" is \"application/json\"\n   * it parses the response and returns an object\n   *\n   * @return {String|Object}\n   */\n  data: function data() {\n    var data = this.responseData;\n\n    if (this.isContentTypeJSON()) {\n      try {\n        data = JSON.parse(this.responseData);\n      } catch (e) {}\n    }\n\n    return data;\n  },\n  isContentTypeJSON: function isContentTypeJSON() {\n    return (/application\\/json/.test(this.headers()['content-type'])\n    );\n  },\n\n\n  /**\n   * Enhances current Response returning a new Response\n   *\n   * @param {Object} extras\n   *   @param {Integer} extras.status - it will replace the current status\n   *   @param {String} extras.rawData - it will replace the current rawStatus\n   *   @param {Object} extras.headers - it will be merged with current headers\n   *\n   * @return {Response}\n   */\n  enhance: function enhance(extras) {\n    return new Response(this.request(), extras.status || this.status(), extras.rawData || this.rawData(), (0, _utils.assign)({}, this.headers(), extras.headers));\n  }\n};\n\nexports.default = Response;\n\n\n// WEBPACK FOOTER //\n// ./lib/response.js","'use strict';\n\nvar lib = require('./mappersmith');\nvar _process, defaultGateway;\n\n// Prevents webpack to load the nodejs processs polyfill\ntry {\n  _process = eval('typeof process === \"object\" ? process : undefined');\n} catch (e) {} // eslint-disable-line no-eval\n\nif (typeof XMLHttpRequest !== 'undefined') {\n  // For browsers use XHR adapter\n  defaultGateway = require('./gateway/xhr').default;\n} else if (typeof _process !== 'undefined') {\n  // For node use HTTP adapter\n  defaultGateway = require('./gateway/http').default;\n}\n\nlib.configs.gateway = defaultGateway;\nmodule.exports = lib;\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _manifest = require('./manifest');\n\nvar _manifest2 = _interopRequireDefault(_manifest);\n\nvar _request = require('./request');\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * @typedef ClientBuilder\n * @param {Object} manifest - manifest definition with at least the `resources` key\n * @param {Function} GatewayClassFactory - factory function that returns a gateway class\n */\nfunction ClientBuilder(manifest, GatewayClassFactory, configs) {\n  if (!manifest) {\n    throw new Error('[Mappersmith] invalid manifest (' + manifest + ')');\n  }\n\n  if (!GatewayClassFactory || !GatewayClassFactory()) {\n    throw new Error('[Mappersmith] gateway class not configured (configs.gateway)');\n  }\n\n  var defaultGatewayConfigs = configs.gatewayConfigs;\n  var defaultMiddleware = configs.middleware;\n  this.context = configs.context;\n\n  this.manifest = new _manifest2.default(manifest, defaultGatewayConfigs, defaultMiddleware);\n  this.GatewayClassFactory = GatewayClassFactory;\n}\n\nClientBuilder.prototype = {\n  build: function build() {\n    var _this = this;\n\n    var client = { _manifest: this.manifest };\n\n    this.manifest.eachResource(function (name, methods) {\n      client[name] = _this.buildResource(name, methods);\n    });\n\n    return client;\n  },\n  buildResource: function buildResource(resourceName, methods) {\n    var _this2 = this;\n\n    return methods.reduce(function (resource, method) {\n      return (0, _utils.assign)(resource, _defineProperty({}, method.name, function (requestParams) {\n        var request = new _request2.default(method.descriptor, requestParams);\n        return _this2.invokeMiddlewares(resourceName, method.name, request);\n      }));\n    }, {});\n  },\n  invokeMiddlewares: function invokeMiddlewares(resourceName, resourceMethod, initialRequest) {\n    var context = (0, _utils.assign)({}, this.context);\n    var middleware = this.manifest.createMiddleware({ resourceName: resourceName, resourceMethod: resourceMethod, context: context });\n    var finalRequest = middleware.reduce(function (request, middleware) {\n      return middleware.request(request);\n    }, initialRequest);\n\n    var GatewayClass = this.GatewayClassFactory();\n    var gatewayConfigs = this.manifest.gatewayConfigs;\n    var callGateway = function callGateway() {\n      return new GatewayClass(finalRequest, gatewayConfigs).call();\n    };\n\n    var execute = middleware.reduce(function (next, middleware) {\n      return function () {\n        return middleware.response(next);\n      };\n    }, callGateway);\n\n    return execute();\n  }\n};\n\nexports.default = ClientBuilder;\n\n\n// WEBPACK FOOTER //\n// ./lib/client-builder.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _methodDescriptor = require('./method-descriptor');\n\nvar _methodDescriptor2 = _interopRequireDefault(_methodDescriptor);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\n * @typedef Manifest\n * @param {Object} obj\n *   @param {String} obj.host\n *   @param {Object} obj.gatewayConfigs - default: base values from mappersmith\n *   @param {Object} obj.resources - default: {}\n *   @param {Array}  obj.middleware or obj.middlewares - default: []\n */\nfunction Manifest(obj) {\n  var defaultGatewayConfigs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var defaultMiddleware = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  this.host = obj.host;\n  this.clientId = obj.clientId || null;\n  this.gatewayConfigs = (0, _utils.assign)({}, defaultGatewayConfigs, obj.gatewayConfigs);\n  this.resources = obj.resources || {};\n\n  // TODO: deprecate obj.middlewares in favor of obj.middleware\n  this.middleware = [].concat(_toConsumableArray(obj.middleware || obj.middlewares || []), _toConsumableArray(defaultMiddleware));\n}\n\nManifest.prototype = {\n  eachResource: function eachResource(callback) {\n    var _this = this;\n\n    Object.keys(this.resources).forEach(function (resourceName) {\n      var methods = _this.eachMethod(resourceName, function (methodName) {\n        return {\n          name: methodName,\n          descriptor: _this.createMethodDescriptor(resourceName, methodName)\n        };\n      });\n\n      callback(resourceName, methods);\n    });\n  },\n  eachMethod: function eachMethod(resourceName, callback) {\n    return Object.keys(this.resources[resourceName]).map(callback);\n  },\n  createMethodDescriptor: function createMethodDescriptor(resourceName, methodName) {\n    var definition = this.resources[resourceName][methodName];\n\n    if (!definition || !definition.path) {\n      throw new Error('[Mappersmith] path is undefined for resource \"' + resourceName + '\" method \"' + methodName + '\"');\n    }\n\n    return new _methodDescriptor2.default((0, _utils.assign)({ host: this.host }, definition));\n  },\n\n\n  /**\n   * @param {Object} args\n   *   @param {String|Null} args.clientId\n   *   @param {String} args.resourceName\n   *   @param {String} args.resourceMethod\n   *   @param {Object} args.context\n   *   @param {Boolean} args.mockRequest\n   *\n   * @return {Array<Object>}\n   */\n  createMiddleware: function createMiddleware() {\n    var _this2 = this;\n\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var createInstance = function createInstance(middlewareFactory) {\n      return (0, _utils.assign)({\n        request: function request(_request) {\n          return _request;\n        },\n        response: function response(next) {\n          return next();\n        }\n      }, middlewareFactory((0, _utils.assign)(args, { clientId: _this2.clientId })));\n    };\n\n    return this.middleware.map(createInstance);\n  }\n};\n\nexports.default = Manifest;\n\n\n// WEBPACK FOOTER //\n// ./lib/manifest.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MethodDescriptor;\n/**\n * @typedef MethodDescriptor\n * @param {Object} obj\n *   @param {String} obj.host\n *   @param {String} obj.path\n *   @param {String} obj.method\n *   @param {Object} obj.headers\n *   @param {Object} obj.params\n *   @param {String} obj.bodyAttr - body attribute name. Default: 'body'\n *   @param {String} obj.headersAttr - headers attribute name. Default: 'headers'\n *   @param {String} obj.authAttr - auth attribute name. Default: 'auth'\n *   @param {Number} obj.timeoutAttr - timeout attribute name. Default: 'timeout'\n */\nfunction MethodDescriptor(obj) {\n  this.host = obj.host;\n  this.path = obj.path;\n  this.method = obj.method || 'get';\n  this.headers = obj.headers;\n  this.params = obj.params;\n  this.binary = obj.binary || false;\n\n  this.bodyAttr = obj.bodyAttr || 'body';\n  this.headersAttr = obj.headersAttr || 'headers';\n  this.authAttr = obj.authAttr || 'auth';\n  this.timeoutAttr = obj.timeoutAttr || 'timeout';\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/method-descriptor.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('./utils');\n\nvar REGEXP_DYNAMIC_SEGMENT = new RegExp('{([^}]+)}');\n\n/**\n * @typedef Request\n * @param {MethodDescriptor} methodDescriptor\n * @param {Object} requestParams, defaults to an empty object ({})\n */\nfunction Request(methodDescriptor, requestParams) {\n  this.methodDescriptor = methodDescriptor;\n  this.requestParams = requestParams || {};\n}\n\nRequest.prototype = {\n  /**\n   * @return {Object}\n   */\n  params: function params() {\n    var _this = this;\n\n    var params = (0, _utils.assign)({}, this.methodDescriptor.params, this.requestParams);\n\n    var isParam = function isParam(key) {\n      return key !== _this.methodDescriptor.headersAttr && key !== _this.methodDescriptor.bodyAttr && key !== _this.methodDescriptor.authAttr && key !== _this.methodDescriptor.timeoutAttr;\n    };\n\n    return Object.keys(params).reduce(function (obj, key) {\n      if (isParam(key)) {\n        obj[key] = params[key];\n      }\n      return obj;\n    }, {});\n  },\n\n\n  /**\n   * Returns the HTTP method in lowercase\n   *\n   * @return {String}\n   */\n  method: function method() {\n    return this.methodDescriptor.method.toLowerCase();\n  },\n\n\n  /**\n   * Returns host name without trailing slash\n   * Example: http://example.org\n   *\n   * @return {String}\n   */\n  host: function host() {\n    return (this.methodDescriptor.host || '').replace(/\\/$/, '');\n  },\n\n\n  /**\n   * Returns path with parameters and leading slash.\n   * Example: /some/path?param1=true\n   *\n   * @throws {Error} if any dynamic segment is missing.\n   * Example:\n   * Imagine the path '/some/{name}', the error will be similar to:\n   * '[Mappersmith] required parameter missing (name), \"/some/{name}\" cannot be resolved'\n   *\n   * @return {String}\n   */\n  path: function path() {\n    var path = this.methodDescriptor.path;\n\n    if (this.methodDescriptor.path[0] !== '/') {\n      path = '/' + this.methodDescriptor.path;\n    }\n\n    var params = this.params();\n    Object.keys(params).forEach(function (key) {\n      var value = params[key];\n      var pattern = '{' + key + '}';\n\n      if (new RegExp(pattern).test(path)) {\n        path = path.replace('{' + key + '}', value);\n        delete params[key];\n      }\n    });\n\n    var missingDynamicSegmentMatch = path.match(REGEXP_DYNAMIC_SEGMENT);\n    if (missingDynamicSegmentMatch) {\n      throw new Error('[Mappersmith] required parameter missing (' + missingDynamicSegmentMatch[1] + '), \"' + path + '\" cannot be resolved');\n    }\n\n    var queryString = (0, _utils.toQueryString)(params);\n    if (queryString.length !== 0) {\n      path += '?' + queryString;\n    }\n\n    return path;\n  },\n\n\n  /**\n   * Returns the full URL\n   * Example: http://example.org/some/path?param1=true\n   *\n   * @return {String}\n   */\n  url: function url() {\n    return '' + this.host() + this.path();\n  },\n\n\n  /**\n   * Returns an object with the headers. Header names are converted to\n   * lowercase\n   *\n   * @return {Object}\n   */\n  headers: function headers() {\n    return (0, _utils.lowerCaseObjectKeys)((0, _utils.assign)({}, this.methodDescriptor.headers, this.requestParams[this.methodDescriptor.headersAttr]));\n  },\n  body: function body() {\n    return this.requestParams[this.methodDescriptor.bodyAttr];\n  },\n  auth: function auth() {\n    return this.requestParams[this.methodDescriptor.authAttr];\n  },\n  timeout: function timeout() {\n    return this.requestParams[this.methodDescriptor.timeoutAttr];\n  },\n\n\n  /**\n   * Enhances current request returning a new Request\n   * @param {Object} extras\n   *   @param {Object} extras.params - it will be merged with current params\n   *   @param {Object} extras.headers - it will be merged with current headers\n   *   @param {String|Object} extras.body - it will replace the current body\n   *   @param {Object} extras.auth - it will replace the current auth\n   *   @param {Number} extras.timeout - it will replace the current timeout\n   */\n  enhance: function enhance(extras) {\n    var headerKey = this.methodDescriptor.headersAttr;\n    var bodyKey = this.methodDescriptor.bodyAttr;\n    var authKey = this.methodDescriptor.authAttr;\n    var timeoutKey = this.methodDescriptor.timeoutAttr;\n    var requestParams = (0, _utils.assign)({}, this.requestParams, extras.params);\n\n    requestParams[headerKey] = (0, _utils.assign)({}, this.requestParams[headerKey], extras.headers);\n    extras.body && (requestParams[bodyKey] = extras.body);\n    extras.auth && (requestParams[authKey] = extras.auth);\n    extras.timeout && (requestParams[timeoutKey] = extras.timeout);\n\n    return new Request(this.methodDescriptor, requestParams);\n  },\n\n\n  /**\n   * Is the request expecting a binary response?\n   *\n   * @return {Boolean}\n   */\n  isBinary: function isBinary() {\n    return this.methodDescriptor.binary;\n  }\n};\n\nexports.default = Request;\n\n\n// WEBPACK FOOTER //\n// ./lib/request.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _gateway = require('../gateway');\n\nvar _gateway2 = _interopRequireDefault(_gateway);\n\nvar _response = require('../response');\n\nvar _response2 = _interopRequireDefault(_response);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar toBase64 = window.btoa || _utils.btoa;\n\nfunction XHR(request) {\n  _gateway2.default.apply(this, arguments);\n}\n\nXHR.prototype = _gateway2.default.extends({\n  get: function get() {\n    var xmlHttpRequest = this.createXHR();\n    xmlHttpRequest.open('get', this.request.url(), true);\n    this.setHeaders(xmlHttpRequest, {});\n    this.configureTimeout(xmlHttpRequest);\n    xmlHttpRequest.send();\n  },\n  post: function post() {\n    this.performRequest('post');\n  },\n  put: function put() {\n    this.performRequest('put');\n  },\n  patch: function patch() {\n    this.performRequest('patch');\n  },\n  delete: function _delete() {\n    this.performRequest('delete');\n  },\n  configureTimeout: function configureTimeout(xmlHttpRequest) {\n    var _this = this;\n\n    this.canceled = false;\n    this.timer = null;\n\n    var timeout = this.request.timeout();\n\n    if (timeout) {\n      xmlHttpRequest.timeout = timeout;\n      xmlHttpRequest.addEventListener('timeout', function () {\n        _this.canceled = true;\n        clearTimeout(_this.timer);\n        _this.dispatchClientError('Timeout (' + timeout + 'ms)');\n      });\n\n      // PhantomJS doesn't support timeout for XMLHttpRequest\n      this.timer = setTimeout(function () {\n        _this.canceled = true;\n        _this.dispatchClientError('Timeout (' + timeout + 'ms)');\n      }, timeout + 1);\n    }\n  },\n  configureCallbacks: function configureCallbacks(xmlHttpRequest) {\n    var _this2 = this;\n\n    xmlHttpRequest.addEventListener('load', function () {\n      if (_this2.canceled) {\n        return;\n      }\n\n      clearTimeout(_this2.timer);\n      _this2.dispatchResponse(_this2.createResponse(xmlHttpRequest));\n    });\n\n    xmlHttpRequest.addEventListener('error', function () {\n      if (_this2.canceled) {\n        return;\n      }\n\n      clearTimeout(_this2.timer);\n      _this2.dispatchClientError('Network error');\n    });\n\n    var xhrOptions = this.options().XHR;\n    if (xhrOptions.withCredentials) {\n      xmlHttpRequest.withCredentials = true;\n    }\n\n    if (xhrOptions.configure) {\n      xhrOptions.configure(xmlHttpRequest);\n    }\n  },\n  performRequest: function performRequest(method) {\n    var requestMethod = this.shouldEmulateHTTP() ? 'post' : method;\n    var xmlHttpRequest = this.createXHR();\n    xmlHttpRequest.open(requestMethod, this.request.url(), true);\n\n    var customHeaders = {};\n    var body = this.prepareBody(method, customHeaders);\n    this.setHeaders(xmlHttpRequest, customHeaders);\n    this.configureTimeout(xmlHttpRequest);\n\n    var args = [];\n    body && args.push(body);\n\n    xmlHttpRequest.send.apply(xmlHttpRequest, args);\n  },\n  createResponse: function createResponse(xmlHttpRequest) {\n    var status = xmlHttpRequest.status;\n    var data = this.request.isBinary() ? xmlHttpRequest.response : xmlHttpRequest.responseText;\n    var responseHeaders = (0, _utils.parseResponseHeaders)(xmlHttpRequest.getAllResponseHeaders());\n    return new _response2.default(this.request, status, data, responseHeaders);\n  },\n  setHeaders: function setHeaders(xmlHttpRequest, customHeaders) {\n    var auth = this.request.auth();\n    if (auth) {\n      var username = auth.username || '';\n      var password = auth.password || '';\n      customHeaders['authorization'] = 'Basic ' + toBase64(username + ':' + password);\n    }\n\n    var headers = (0, _utils.assign)(customHeaders, this.request.headers());\n    Object.keys(headers).forEach(function (headerName) {\n      xmlHttpRequest.setRequestHeader(headerName, headers[headerName]);\n    });\n  },\n  createXHR: function createXHR() {\n    var xmlHttpRequest = new XMLHttpRequest(); // eslint-disable-line no-undef\n    this.configureCallbacks(xmlHttpRequest);\n    if (this.request.isBinary()) {\n      xmlHttpRequest.responseType = 'blob';\n    }\n    return xmlHttpRequest;\n  }\n});\n\nexports.default = XHR;\n\n\n// WEBPACK FOOTER //\n// ./lib/gateway/xhr.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('./utils');\n\nvar _mappersmith = require('./mappersmith');\n\nvar _response = require('./response');\n\nvar _response2 = _interopRequireDefault(_response);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction Gateway(request) {\n  var configs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  this.request = request;\n  this.configs = configs;\n  this.successCallback = function () {};\n  this.failCallback = function () {};\n}\n\nGateway.extends = function (methods) {\n  return (0, _utils.assign)({}, Gateway.prototype, methods);\n};\n\nGateway.prototype = {\n  options: function options() {\n    return this.configs;\n  },\n  shouldEmulateHTTP: function shouldEmulateHTTP() {\n    return this.options().emulateHTTP && /^(delete|put|patch)/i.test(this.request.method());\n  },\n  call: function call() {\n    var _this = this,\n        _arguments = arguments;\n\n    var timeStart = (0, _utils.performanceNow)();\n    return new _mappersmith.configs.Promise(function (resolve, reject) {\n      _this.successCallback = function (response) {\n        response.timeElapsed = (0, _utils.performanceNow)() - timeStart;\n        resolve(response);\n      };\n\n      _this.failCallback = function (response) {\n        response.timeElapsed = (0, _utils.performanceNow)() - timeStart;\n        reject(response);\n      };\n\n      try {\n        _this[_this.request.method()].apply(_this, _arguments);\n      } catch (e) {\n        _this.dispatchClientError(e.message);\n      }\n    });\n  },\n  dispatchResponse: function dispatchResponse(response) {\n    response.success() ? this.successCallback(response) : this.failCallback(response);\n  },\n  dispatchClientError: function dispatchClientError(message) {\n    this.failCallback(new _response2.default(this.request, 400, message));\n  },\n  prepareBody: function prepareBody(method, headers) {\n    var body = this.request.body();\n\n    if (this.shouldEmulateHTTP()) {\n      body = body || {};\n      (0, _utils.isPlainObject)(body) && (body._method = method);\n      headers['x-http-method-override'] = method;\n    }\n\n    var bodyString = (0, _utils.toQueryString)(body);\n\n    if (bodyString) {\n      // If it's not simple, let the browser (or the user) set it\n      if ((0, _utils.isPlainObject)(body)) {\n        headers['content-type'] = 'application/x-www-form-urlencoded;charset=utf-8';\n      }\n    }\n\n    return bodyString;\n  }\n};\n\nexports.default = Gateway;\n\n\n// WEBPACK FOOTER //\n// ./lib/gateway.js"],"sourceRoot":""}